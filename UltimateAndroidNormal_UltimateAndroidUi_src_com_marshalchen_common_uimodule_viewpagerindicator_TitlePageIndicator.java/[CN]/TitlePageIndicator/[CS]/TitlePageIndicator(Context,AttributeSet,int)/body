{
  super(context,attrs,defStyle);
  if (isInEditMode())   return;
  final Resources res=getResources();
  final int defaultFooterColor=res.getColor(R.color.default_title_indicator_footer_color);
  final float defaultFooterLineHeight=res.getDimension(R.dimen.default_title_indicator_footer_line_height);
  final int defaultFooterIndicatorStyle=res.getInteger(R.integer.default_title_indicator_footer_indicator_style);
  final float defaultFooterIndicatorHeight=res.getDimension(R.dimen.default_title_indicator_footer_indicator_height);
  final float defaultFooterIndicatorUnderlinePadding=res.getDimension(R.dimen.default_title_indicator_footer_indicator_underline_padding);
  final float defaultFooterPadding=res.getDimension(R.dimen.default_title_indicator_footer_padding);
  final int defaultLinePosition=res.getInteger(R.integer.default_title_indicator_line_position);
  final int defaultSelectedColor=res.getColor(R.color.default_title_indicator_selected_color);
  final boolean defaultSelectedBold=res.getBoolean(R.bool.default_title_indicator_selected_bold);
  final int defaultTextColor=res.getColor(R.color.default_title_indicator_text_color);
  final float defaultTextSize=res.getDimension(R.dimen.default_title_indicator_text_size);
  final float defaultTitlePadding=res.getDimension(R.dimen.default_title_indicator_title_padding);
  final float defaultClipPadding=res.getDimension(R.dimen.default_title_indicator_clip_padding);
  final float defaultTopPadding=res.getDimension(R.dimen.default_title_indicator_top_padding);
  TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.TitlePageIndicator,defStyle,0);
  mFooterLineHeight=a.getDimension(R.styleable.TitlePageIndicator_footerLineHeight,defaultFooterLineHeight);
  mFooterIndicatorStyle=IndicatorStyle.fromValue(a.getInteger(R.styleable.TitlePageIndicator_footerIndicatorStyle,defaultFooterIndicatorStyle));
  mFooterIndicatorHeight=a.getDimension(R.styleable.TitlePageIndicator_footerIndicatorHeight,defaultFooterIndicatorHeight);
  mFooterIndicatorUnderlinePadding=a.getDimension(R.styleable.TitlePageIndicator_footerIndicatorUnderlinePadding,defaultFooterIndicatorUnderlinePadding);
  mFooterPadding=a.getDimension(R.styleable.TitlePageIndicator_footerPadding,defaultFooterPadding);
  mLinePosition=LinePosition.fromValue(a.getInteger(R.styleable.TitlePageIndicator_linePosition,defaultLinePosition));
  mTopPadding=a.getDimension(R.styleable.TitlePageIndicator_topPadding,defaultTopPadding);
  mTitlePadding=a.getDimension(R.styleable.TitlePageIndicator_titlePadding,defaultTitlePadding);
  mClipPadding=a.getDimension(R.styleable.TitlePageIndicator_clipPadding,defaultClipPadding);
  mColorSelected=a.getColor(R.styleable.TitlePageIndicator_selectedColor,defaultSelectedColor);
  mColorText=a.getColor(R.styleable.TitlePageIndicator_android_textColor,defaultTextColor);
  mBoldText=a.getBoolean(R.styleable.TitlePageIndicator_selectedBold,defaultSelectedBold);
  final float textSize=a.getDimension(R.styleable.TitlePageIndicator_android_textSize,defaultTextSize);
  final int footerColor=a.getColor(R.styleable.TitlePageIndicator_footerColor,defaultFooterColor);
  mPaintText.setTextSize(textSize);
  mPaintText.setAntiAlias(true);
  mPaintFooterLine.setStyle(Paint.Style.FILL_AND_STROKE);
  mPaintFooterLine.setStrokeWidth(mFooterLineHeight);
  mPaintFooterLine.setColor(footerColor);
  mPaintFooterIndicator.setStyle(Paint.Style.FILL_AND_STROKE);
  mPaintFooterIndicator.setColor(footerColor);
  Drawable background=a.getDrawable(R.styleable.TitlePageIndicator_android_background);
  if (background != null) {
    setBackgroundDrawable(background);
  }
  a.recycle();
  final ViewConfiguration configuration=ViewConfiguration.get(context);
  mTouchSlop=ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
}
